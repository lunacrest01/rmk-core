# keyboard.toml â€” corrected for rmk-config parser (Pro Micro nRF52840 3x3 + encoder + BLE)
[keyboard]
name = "CORE"
product_name = "CORE"
vendor_id = 0x6272
product_id = 0x0002
manufacturer = "braxon"
chip = "nrf52840_ble"

[matrix]
input_pins  = ["P0_06", "P0_08", "P0_17"]   # rows
output_pins = ["P0_20", "P0_22", "P1_00"]   # columns

[layout]
rows = 3
cols = 3
layers = 2

keymap = [
  [
    ["K00", "K01", "K02"],
    ["K10", "K11", "K12"],
    ["K20", "K21", "K22"]
  ],
  [
    ["_", "VOLD", "VOLU"],
    ["_", "MEDIA_PLAY", "_"],
    ["_", "_", "_"]
  ]
]

# -------- encoder (correct types) --------
[[input_device.encoder]]
pin_a = "P1_04"          # string
pin_b = "P1_06"          # string
phase = "default"        # MUST be a string (e.g. "default", "e8h7", or "resolution")
resolution = 4           # integer (pulses per detent rule depends on your encoder)
reverse = false          # boolean
internal_pullup = true   # boolean

[features]
vial = true
storage = true
ble = true

[ble]
enabled = true
battery_adc_pin = "vddh"
default_tx_power = 0
use_2m_phy = true

[storage]
# storage is enabled by default
